{% extends "base.html" %}
{% block content %}

{{error_message if error_message}}

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
</head>

<body>
    <form action="/api/logout" method="POST">
        <input type="submit" value="Logout" onclick="return confirm('{{ username }}, you are logging out!');">
    </form>

  <div class="jumbotron text-center">
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <h2>Search For Your Achive:</h2>
          <form action="/api/archive_url" method="GET">
            <input type="text" placeholder="URL" id="archive_url_text" name="archive_url_text">
            <button type="submit">Search</button>
          </form>
        </div>
        <div class="col-sm-4">
          <h2>Achive A Webpage </h2>
          <form action="/api/archive_url" method="GET">
            <input type="text" placeholder="URL" id="archive_url_text" name="archive_url_text">
            <button type="submit" name="action" value="archive_url_submit">Archive</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-sm-4">

        <!-- <div class="row"> -->
        <h3>Success</h3>
        <div class="my_table">
          <table class="table">
            <thead>
              <tr>
                <th>URL</th>
                <th>Date</th>
                <th>Link</th>
              </tr>
            </thead>
            {% for item in success_list %}
            <tbody>
              <td>{{item.query_url}}</td>
              <td>{{item.created_timestamp}}</td>
              <td>
                <form action="/api/archive_url" method="GET">
                  <button type="submit" id="archive_url_text" name="archive_url_text"
                    value={{item.query_url}}>Go</button>
                </form>
              </td>
            </tbody>
            {% endfor %}
          </table>
        </div>
        <h3>Pending</h3>
        <div class="my_table">
          <table class="table">
            <thead>
              <tr>
                <th>URL</th>
                <th>Date</th>
                <th>Link</th>
              </tr>
            </thead>
            {% for item in pending_list %}
            <tbody>
              <td>{{item.query_url}}</td>
              <td>{{item.created_timestamp}}</td>
              <td>
                <form action="/api/archive_url" method="GET">
                  <button type="submit" id="archive_url_text" name="archive_url_text"
                    value={{item.query_url}}>Go</button>
                </form>
              </td>
            </tbody>
            {% endfor %}
          </table>
        </div>
        <h3>Failed</h3>
        <div class="my_table">
          <table class="table">
            <thead>
              <tr>
                <th>URL</th>
                <th>Date</th>
                <th>Link</th>
              </tr>
            </thead>
            {% for item in failed_list %}
            <tbody>
              <td>{{item.query_url}}</td>
              <td>{{item.created_timestamp}}</td>
              <td>
                <form action="/api/archive_url" method="GET">
                  <button type="submit" id="archive_url_text" name="archive_url_text"
                    value={{item.query_url}}>Go</button>
                </form>
              </td>
            </tbody>
            {% endfor %}
          </table>
        </div>
      </div>
      <div class="col-sm-4">
        <h3>Calendar</h3>
      </div>
      <div class="col-sm-4">
        <h3>Achive Request Summary</h3>
        {% if url_screenshot_info %}
        <br>
        <br>
        <br>
        <img src={{url_screenshot_info.screenshot_url}}>
        <br>
        <br>
        <br>
        <p>Query URL: {{url_screenshot_info.query_url}}</p>
        <p>Adjusted URL: {{url_screenshot_info.adjusted_url}}</p>
        <p>Created Username: {{url_screenshot_info.created_username}}</p>
        <p>Created Timestamp: {{url_screenshot_info.created_timestamp}}</p>
        <br>
        <p>Archive.md URL: {{url_screenshot_info.archivemd_url}}</p>
        {% endif %}
      </div>
    </div>
  </div>

</body>

<style>
  /* .row {
    height: 33%;
    overflow: scroll;
  } */

  .my_table {
    height: 15%;
    overflow: scroll;
  }

  /* .notification {
    height: 20%;
  }

  .container {
    height: 100%;
  }

  .body {
    height: 100vh;
  } */
</style>


{% endblock %}